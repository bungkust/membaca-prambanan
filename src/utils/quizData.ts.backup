import { Question } from "@/types/quiz";

const shuffleArray = <T,>(array: T[]): T[] => {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
};

// Generate Suku Kata questions (130 questions)
const generateSukaKataQuestions = (): Question[] => {
  const consonants = ['B','C','D','F','G','H','J','K','L','M','N','P','Q','R','S','T','V','W','X','Y','Z'];
  const vowels = ['a','i','u','e','o'];
  const questions: Question[] = [];
  
  consonants.forEach(consonant => {
    vowels.forEach((vowel, vIndex) => {
      const syllable = consonant + vowel;
      const level = vIndex < 3 ? 'mudah' : (vIndex === 3 ? 'sedang' : 'sulit');
      const otherVowels = vowels.filter(v => v !== vowel).slice(0, 2);
      const wrongChoices = otherVowels.map(v => consonant + v);
      const allChoices = shuffleArray([syllable, ...wrongChoices]);
      
      questions.push({
        id: `${consonant.toLowerCase()}-${syllable.toLowerCase()}`,
        type: "read_syllable",
        prompt: "Dengarkan suku kata ini",
        display: syllable,
        ttsText: syllable,
        answer: syllable,
        choices: allChoices,
        level: level,
        tags: ["konsonan+vokal", consonant, vowel.toUpperCase()]
      });
    });
  });
  
  return questions;
};

// Awal Kata questions (150 questions) - data from document
const awalKataData = [
  { "id": "Mata", "image": "ðŸ‘ï¸", "answer": "M", "choices": ["M", "N", "B"] },
  { "id": "Hidung", "image": "ðŸ‘ƒ", "answer": "H", "choices": ["H", "N", "M"] },
  { "id": "Mulut", "image": "ðŸ‘„", "answer": "M", "choices": ["M", "B", "P"] },
  { "id": "Telinga", "image": "ðŸ‘‚", "answer": "T", "choices": ["T", "D", "P"] },
  { "id": "Tangan", "image": "âœ‹", "answer": "T", "choices": ["T", "K", "P"] },
  { "id": "Kaki", "image": "ðŸ¦µ", "answer": "K", "choices": ["K", "T", "M"] },
  { "id": "Rambut", "image": "ðŸ’‡", "answer": "R", "choices": ["R", "H", "M"] },
  { "id": "Perut", "image": "ðŸ§", "answer": "P", "choices": ["P", "B", "M"] },
  { "id": "Punggung", "image": "ðŸ§", "answer": "P", "choices": ["P", "B", "T"] },
  { "id": "Lutut", "image": "ðŸ¦µ", "answer": "L", "choices": ["L", "S", "T"] },
  { "id": "Siku", "image": "ðŸ’ª", "answer": "S", "choices": ["S", "T", "L"] },
  { "id": "Jari", "image": "ðŸ‘†", "answer": "J", "choices": ["J", "T", "L"] },
  { "id": "Kuku", "image": "ðŸ’…", "answer": "K", "choices": ["K", "J", "M"] },
  { "id": "Bahu", "image": "ðŸ’ª", "answer": "B", "choices": ["B", "P", "T"] },
  { "id": "Leher", "image": "ðŸ§£", "answer": "L", "choices": ["L", "N", "M"] },
  { "id": "Dagu", "image": "ðŸ§”", "answer": "D", "choices": ["D", "B", "P"] },
  { "id": "Dahi", "image": "ðŸ¤”", "answer": "D", "choices": ["D", "P", "M"] },
  { "id": "Alis", "image": "ðŸ™„", "answer": "A", "choices": ["A", "M", "H"] },
  { "id": "Bibir", "image": "ðŸ‘„", "answer": "B", "choices": ["B", "M", "P"] },
  { "id": "Gigi", "image": "ðŸ¦·", "answer": "G", "choices": ["G", "L", "M"] },
  { "id": "Lidah", "image": "ðŸ‘…", "answer": "L", "choices": ["L", "B", "M"] },
  { "id": "Kepala", "image": "ðŸ™‚", "answer": "K", "choices": ["K", "M", "T"] },
  { "id": "Kursi", "image": "ðŸª‘", "answer": "K", "choices": ["K", "M", "T"] },
  { "id": "Meja", "image": "ðŸ›‹ï¸", "answer": "M", "choices": ["M", "K", "T"] },
  { "id": "Pintu", "image": "ðŸšª", "answer": "P", "choices": ["P", "B", "M"] },
  { "id": "Jendela", "image": "ðŸªŸ", "answer": "J", "choices": ["J", "P", "M"] },
  { "id": "Lemari", "image": "ðŸ—„ï¸", "answer": "L", "choices": ["L", "M", "K"] },
  { "id": "Kasur", "image": "ðŸ›ï¸", "answer": "K", "choices": ["K", "M", "T"] },
  { "id": "Bantal", "image": "ðŸ›ï¸", "answer": "B", "choices": ["B", "P", "K"] },
  { "id": "Cermin", "image": "ðŸªž", "answer": "C", "choices": ["C", "S", "G"] },
  { "id": "Lampu", "image": "ðŸ’¡", "answer": "L", "choices": ["L", "B", "K"] },
  { "id": "Kipas", "image": "ðŸŒ€", "answer": "K", "choices": ["K", "L", "M"] },
  { "id": "TV", "image": "ðŸ“º", "answer": "T", "choices": ["T", "K", "L"] },
  { "id": "Radio", "image": "ðŸ“»", "answer": "R", "choices": ["R", "L", "K"] },
  { "id": "Kompor", "image": "ðŸ”¥", "answer": "K", "choices": ["K", "M", "L"] },
  { "id": "Wajan", "image": "ðŸ³", "answer": "W", "choices": ["W", "K", "M"] },
  { "id": "Piring", "image": "ðŸ½ï¸", "answer": "P", "choices": ["P", "B", "M"] },
  { "id": "Gelas", "image": "ðŸ¥¤", "answer": "G", "choices": ["G", "C", "B"] },
  { "id": "Sendok", "image": "ðŸ¥„", "answer": "S", "choices": ["S", "C", "G"] },
  { "id": "Garpu", "image": "ðŸ´", "answer": "G", "choices": ["G", "S", "C"] },
  { "id": "Pisau", "image": "ðŸ”ª", "answer": "P", "choices": ["P", "G", "S"] },
  { "id": "Nasi", "image": "ðŸš", "answer": "N", "choices": ["N", "M", "B"] },
  { "id": "Air", "image": "ðŸ’§", "answer": "A", "choices": ["A", "I", "U"] },
  { "id": "Susu", "image": "ðŸ¥›", "answer": "S", "choices": ["S", "M", "B"] },
  { "id": "Roti", "image": "ðŸž", "answer": "R", "choices": ["R", "L", "K"] },
  { "id": "Kue", "image": "ðŸ°", "answer": "K", "choices": ["K", "M", "B"] },
  { "id": "Buah", "image": "ðŸŽ", "answer": "B", "choices": ["B", "P", "M"] },
  { "id": "Mangga", "image": "ðŸ¥­", "answer": "M", "choices": ["M", "B", "P"] },
  { "id": "Pisang", "image": "ðŸŒ", "answer": "P", "choices": ["P", "B", "M"] },
  { "id": "Kelapa", "image": "ðŸ¥¥", "answer": "K", "choices": ["K", "M", "G"] },
  { "id": "Jeruk", "image": "ðŸŠ", "answer": "J", "choices": ["J", "C", "G"] },
  { "id": "Wortel", "image": "ðŸ¥•", "answer": "W", "choices": ["W", "K", "M"] },
  { "id": "Ayam", "image": "ðŸ”", "answer": "A", "choices": ["A", "I", "U"] },
  { "id": "Ikan", "image": "ðŸŸ", "answer": "I", "choices": ["I", "A", "U"] },
  { "id": "Telur", "image": "ðŸ¥š", "answer": "T", "choices": ["T", "D", "K"] },
  { "id": "Bunga", "image": "ðŸŒ¸", "answer": "B", "choices": ["B", "P", "M"] },
  { "id": "Pohon", "image": "ðŸŒ³", "answer": "P", "choices": ["P", "B", "M"] },
  { "id": "Rumput", "image": "ðŸŒ±", "answer": "R", "choices": ["R", "L", "K"] },
  { "id": "Daun", "image": "ðŸƒ", "answer": "D", "choices": ["D", "B", "P"] },
  { "id": "Batu", "image": "ðŸª¨", "answer": "B", "choices": ["B", "P", "M"] },
  { "id": "Matahari", "image": "â˜€ï¸", "answer": "M", "choices": ["M", "B", "P"] },
  { "id": "Bulan", "image": "ðŸŒ™", "answer": "B", "choices": ["B", "M", "P"] },
  { "id": "Bintang", "image": "â­", "answer": "B", "choices": ["B", "P", "M"] },
  { "id": "Mobil", "image": "ðŸš—", "answer": "M", "choices": ["M", "B", "K"] },
  { "id": "Sepeda", "image": "ðŸš²", "answer": "S", "choices": ["S", "M", "B"] },
  { "id": "Bus", "image": "ðŸšŒ", "answer": "B", "choices": ["B", "M", "K"] },
  { "id": "Kereta", "image": "ðŸš†", "answer": "K", "choices": ["K", "M", "B"] },
  { "id": "Pesawat", "image": "âœˆï¸", "answer": "P", "choices": ["P", "B", "M"] },
  { "id": "Kapal", "image": "â›µ", "answer": "K", "choices": ["K", "M", "B"] },
  { "id": "Boneka", "image": "ðŸ§¸", "answer": "B", "choices": ["B", "P", "M"] },
  { "id": "Bola", "image": "âš½", "answer": "B", "choices": ["B", "P", "M"] },
  { "id": "Balok", "image": "ðŸ§±", "answer": "B", "choices": ["B", "P", "M"] },
  { "id": "Kunci", "image": "ðŸ”‘", "answer": "K", "choices": ["K", "M", "B"] },
  { "id": "Gunting", "image": "âœ‚ï¸", "answer": "G", "choices": ["G", "C", "S"] },
  { "id": "Saputangan", "image": "ðŸ§»", "answer": "S", "choices": ["S", "C", "G"] },
  { "id": "Sabun", "image": "ðŸ§¼", "answer": "S", "choices": ["S", "C", "B"] },
  { "id": "Sikat", "image": "ðŸª¥", "answer": "S", "choices": ["S", "C", "G"] },
  { "id": "Sampo", "image": "ðŸ§´", "answer": "S", "choices": ["S", "C", "G"] },
  { "id": "Handuk", "image": "ðŸ›", "answer": "H", "choices": ["H", "S", "K"] },
  { "id": "Tisu", "image": "ðŸ§»", "answer": "T", "choices": ["T", "K", "S"] }
];


const generateAwalKataQuestions = (): Question[] => {
  return awalKataData.map(item => ({
    id: item.id.toLowerCase(),
    type: 'awal_kata' as const,
    prompt: 'Tebak huruf pertama dari kata yang didengar',
    display: '_' + item.id.slice(1).toLowerCase(),
    ttsText: item.id,
    answer: item.answer,
    choices: shuffleArray(item.choices),
    image: item.image,
    word: item.id,
    tags: ['awal_kata']
  }));
};

// Akhir Kata questions (150 questions)
const akhirKataData = awalKataData.slice(0, 150).map(item => {
  const lastChar = item.id[item.id.length - 1].toUpperCase();
  return {
    id: item.id,
    image: item.image,
    answer: lastChar,
    choices: [lastChar, 'N', 'G']
  };
});

const generateAkhirKataQuestions = (): Question[] => {
  return akhirKataData.map(item => ({
    id: item.id.toLowerCase() + '_akhir',
    type: 'akhir_kata' as const,
    prompt: 'Tebak huruf terakhir dari kata yang didengar',
    display: item.id.slice(0, -1).toLowerCase() + '_',
    ttsText: item.id,
    answer: item.answer,
    choices: shuffleArray(item.choices),
    image: item.image,
    word: item.id,
    tags: ['akhir_kata']
  }));
};

const tengahSukuKataData = [
  { id: 'telepon', display: 'te-__-pon', answer: 'le', choices: ['le', 'la', 'li'], image: 'ðŸ“ž', syllables: ['te', 'le', 'pon'] },
  { id: 'bermain', display: 'ber-__-main', answer: 'ma', choices: ['ma', 'mi', 'me'], image: 'âš½', syllables: ['ber', 'ma', 'in'] },
  { id: 'makanan', display: 'ma-__-nan', answer: 'ka', choices: ['ka', 'ki', 'ke'], image: 'ðŸ½ï¸', syllables: ['ma', 'ka', 'nan'] },
  { id: 'minuman', display: 'mi-__-man', answer: 'nu', choices: ['nu', 'na', 'ni'], image: 'ðŸ¥¤', syllables: ['mi', 'nu', 'man'] },
  { id: 'kucing', display: 'ku-__-cing', answer: 'cing', choices: ['cing', 'cang', 'ceng'], image: 'ðŸ±', syllables: ['ku', 'cing'] },
  { id: 'burung', display: 'bu-__-rung', answer: 'rung', choices: ['rung', 'rang', 'reng'], image: 'ðŸ¦', syllables: ['bu', 'rung'] },
  { id: 'bunga', display: 'bun-__-ga', answer: 'ga', choices: ['ga', 'gi', 'ge'], image: 'ðŸŒ¸', syllables: ['bun', 'ga'] },
  { id: 'pantai', display: 'pan-__-tai', answer: 'tai', choices: ['tai', 'tae', 'tao'], image: 'ðŸ–ï¸', syllables: ['pan', 'tai'] },
  { id: 'rumah', display: 'ru-__-mah', answer: 'mah', choices: ['mah', 'meh', 'mih'], image: 'ðŸ ', syllables: ['ru', 'mah'] },
  { id: 'kertas', display: 'ker-__-tas', answer: 'tas', choices: ['tas', 'tes', 'tis'], image: 'ðŸ“„', syllables: ['ker', 'tas'] }
];

const generateTengahSukuKataQuestions = (): Question[] => {
  return tengahSukuKataData.map(item => {
    const fullWord = item.syllables.join('');
    return {
      id: item.id + '_tengah_suku_kata',
      type: 'tengah_suku_kata' as const,
      prompt: 'Lengkapi suku kata yang hilang di tengah kata',
      display: item.display,
      ttsText: fullWord,
      answer: item.answer,
      choices: shuffleArray(item.choices),
      image: item.image,
      word: fullWord,
      level: 'mudah',
      tags: ['tengah_suku_kata']
    };
  });
};

// Lengkapi Suku Kata Belakang â€” suku kata depan hilang (minimal 2 suku kata)
const lengkapiSukuKataBelakangData = [
  { id: 'sapu',    display: '__-pu',      answer: 'sa',  choices: ['sa','si','se'], image: 'ðŸ§¹' },
  { id: 'buka',    display: '__-ka',      answer: 'bu',  choices: ['bu','ba','bo'], image: 'ðŸ“–' },
  { id: 'topi',    display: '__-pi',      answer: 'to',  choices: ['to','ta','ti'], image: 'ðŸŽ©' },
  { id: 'roda',    display: '__-da',      answer: 'ro',  choices: ['ro','ra','ri'], image: 'ðŸ›ž' },
  { id: 'baju',    display: '__-ju',      answer: 'ba',  choices: ['ba','bi','be'], image: 'ðŸ‘•' },
  { id: 'mata',    display: '__-ta',      answer: 'ma',  choices: ['ma','mi','me'], image: 'ðŸ‘ï¸' },
  { id: 'kaki',    display: '__-ki',      answer: 'ka',  choices: ['ka','ki','ke'], image: 'ðŸ¦µ' },
  { id: 'nasi',    display: '__-si',      answer: 'na',  choices: ['na','ni','ne'], image: 'ðŸš' },
  { id: 'gigi',    display: '__-gi',      answer: 'gi',  choices: ['gi','ga','ge'], image: 'ðŸ¦·' },
  { id: 'dada',    display: '__-da',      answer: 'da',  choices: ['da','di','de'], image: 'ðŸ«' },
  { id: 'mama',    display: '__-ma',      answer: 'ma',  choices: ['ma','mi','me'], image: 'ðŸ‘©' },
  { id: 'papa',    display: '__-pa',      answer: 'pa',  choices: ['pa','pi','pe'], image: 'ðŸ‘¨' },
  { id: 'susu',    display: '__-su',      answer: 'su',  choices: ['su','si','se'], image: 'ðŸ¥›' },
  { id: 'kuku',    display: '__-ku',      answer: 'ku',  choices: ['ku','ka','ke'], image: 'ðŸ’…' },
  { id: 'lala',    display: '__-la',      answer: 'la',  choices: ['la','li','le'], image: 'ðŸŽµ' },
  { id: 'tahu',    display: '__-hu',      answer: 'ta',  choices: ['ta','ti','te'], image: 'ðŸ§ˆ' },
  { id: 'soto',    display: '__-to',      answer: 'so',  choices: ['so','sa','si'], image: 'ðŸ²' },
  { id: 'kopi',    display: '__-pi',      answer: 'ko',  choices: ['ko','ka','ki'], image: 'â˜•' },
  { id: 'air',     display: '__-ir',      answer: 'a',   choices: ['a','i','e'],   image: 'ðŸ’§' },
  { id: 'lari',    display: '__-ri',      answer: 'la',  choices: ['la','li','le'], image: 'ðŸƒ' },
  { id: 'babi',    display: '__-bi',      answer: 'ba',  choices: ['ba','be','bo'], image: 'ðŸ–' },
  { id: 'cari',    display: '__-ri',      answer: 'ca',  choices: ['ca','ci','ce'], image: 'ðŸ”' },
  { id: 'duri',    display: '__-ri',      answer: 'du',  choices: ['du','di','de'], image: 'ðŸŒµ' },
  { id: 'foto',    display: '__-to',      answer: 'fo',  choices: ['fo','fa','fi'], image: 'ðŸ“·' },
  { id: 'guru',    display: '__-ru',      answer: 'gu',  choices: ['gu','ga','ge'], image: 'ðŸ‘©â€ðŸ«' },
  { id: 'hati',    display: '__-ti',      answer: 'ha',  choices: ['ha','hi','he'], image: 'â¤ï¸' },
  { id: 'ikan',    display: '__-kan',     answer: 'i',   choices: ['i','e','a'],   image: 'ðŸŸ' },
  { id: 'jari',    display: '__-ri',      answer: 'ja',  choices: ['ja','ji','je'], image: 'ðŸ‘†' },
  { id: 'kota',    display: '__-ta',      answer: 'ko',  choices: ['ko','ka','ki'], image: 'ðŸ™ï¸' },
  { id: 'lucu',    display: '__-cu',      answer: 'lu',  choices: ['lu','la','le'], image: 'ðŸ˜„' },
  { id: 'meja',    display: '__-ja',      answer: 'me',  choices: ['me','ma','mi'], image: 'ðŸª‘' },
  { id: 'nada',    display: '__-da',      answer: 'na',  choices: ['na','ni','ne'], image: 'ðŸŽµ' },
  { id: 'pagi',    display: '__-gi',      answer: 'pa',  choices: ['pa','pi','pe'], image: 'ðŸŒ…' },
  { id: 'rusa',    display: '__-sa',      answer: 'ru',  choices: ['ru','ra','ri'], image: 'ðŸ¦Œ' },
  { id: 'sapi',    display: '__-pi',      answer: 'sa',  choices: ['sa','si','se'], image: 'ðŸ„' },
  { id: 'tangan',  display: '__-gan',     answer: 'tan', choices: ['tan','tin','ten'], image: 'âœ‹' }, // tang-ga
  { id: 'ular',    display: '__-lar',     answer: 'u',   choices: ['u','o','a'],   image: 'ðŸ' },
  { id: 'wangi',   display: '__-ngi',     answer: 'wa',  choices: ['wa','wi','we'], image: 'ðŸŒ¸' },
  { id: 'bola',    display: '__-la',      answer: 'bo',  choices: ['bo','ba','bi'], image: 'âš½' },
  { id: 'cinta',   display: '__-ta',      answer: 'cin', choices: ['cin','can','cen'], image: 'ðŸ’•' },
  { id: 'dapur',   display: '__-pur',     answer: 'da',  choices: ['da','di','de'], image: 'ðŸ³' },
  { id: 'emas',    display: '__-mas',     answer: 'e',   choices: ['e','a','i'],   image: 'ðŸª™' },
  { id: 'gula',    display: '__-la',      answer: 'gu',  choices: ['gu','ga','gi'], image: 'ðŸ¯' },
  { id: 'hujan',   display: '__-jan',     answer: 'hu',  choices: ['hu','ha','hi'], image: 'ðŸŒ§ï¸' },
  { id: 'jaket',   display: '__-ket',     answer: 'ja',  choices: ['ja','ji','je'], image: 'ðŸ§¥' },
  { id: 'kamar',   display: '__-mar',     answer: 'ka',  choices: ['ka','ki','ke'], image: 'ðŸ›ï¸' },
  { id: 'laptop',  display: '__-top',     answer: 'lap', choices: ['lap','lip','lep'], image: 'ðŸ’»' },
  { id: 'mobil',   display: '__-bil',     answer: 'mo',  choices: ['mo','ma','mi'], image: 'ðŸš—' },
  { id: 'novel',   display: '__-vel',     answer: 'no',  choices: ['no','na','ni'], image: 'ðŸ“š' },
  { id: 'pantai',  display: '__-tai',     answer: 'pan', choices: ['pan','pin','pen'], image: 'ðŸ–ï¸' },
  { id: 'rumah',   display: '__-mah',     answer: 'ru',  choices: ['ru','ra','ri'], image: 'ðŸ ' },
  { id: 'sepatu',  display: '__-pa-tu',   answer: 'se',  choices: ['se','sa','si'], image: 'ðŸ‘Ÿ' },
  { id: 'uang',    display: '__-ang',     answer: 'u',   choices: ['u','o','a'],   image: 'ðŸ’°' },
  { id: 'vitamin', display: '__-ta-min',  answer: 'vi',  choices: ['vi','va','ve'], image: 'ðŸ’Š' },
  { id: 'warna',   display: '__-na',      answer: 'war', choices: ['war','wan','wer'], image: 'ðŸŽ¨' }, // war-na
  { id: 'telepon', display: '__-le-pon',  answer: 'te',  choices: ['te','ta','ti'], image: 'ðŸ“ž' },
  { id: 'kucing',  display: '__-cing',    answer: 'ku',  choices: ['ku','ka','ki'], image: 'ðŸ±' },
  { id: 'mangga',  display: '__-ga',      answer: 'mang',choices: ['mang','man','meng'], image: 'ðŸ¥­' }, // mang-ga
  { id: 'pisang',  display: '__-sang',    answer: 'pi',  choices: ['pi','pa','pe'], image: 'ðŸŒ' },
  { id: 'kelapa',  display: '__-la-pa',   answer: 'ke',  choices: ['ke','ka','ki'], image: 'ðŸ¥¥' },
  { id: 'jeruk',   display: '__-ruk',     answer: 'je',  choices: ['je','ja','ji'], image: 'ðŸŠ' },
  { id: 'wortel',  display: '__-tel',     answer: 'wor', choices: ['wor','war','wir'], image: 'ðŸ¥•' }, // wor-tel
  { id: 'ayam',    display: '__-yam',     answer: 'a',   choices: ['a','i','e'],   image: 'ðŸ”' },
  { id: 'telur',   display: '__-lur',     answer: 'te',  choices: ['te','ta','ti'], image: 'ðŸ¥š' },
  { id: 'itik',    display: '__-tik',     answer: 'i',   choices: ['i','e','a'],   image: 'ðŸ¦†' },
  { id: 'kambing', display: '__-bing',    answer: 'kam', choices: ['kam','kem','kim'], image: 'ðŸ' },
  { id: 'boneka',  display: '__-ne-ka',   answer: 'bo',  choices: ['bo','ba','bi'], image: 'ðŸ§¸' },
  { id: 'balok',   display: '__-lok',     answer: 'ba',  choices: ['ba','bi','be'], image: 'ðŸ§±' },
  { id: 'kunci',   display: '__-ci',      answer: 'kun', choices: ['kun','kan','kin'], image: 'ðŸ”‘' },
  { id: 'lemari',  display: '__-ma-ri',   answer: 'le',  choices: ['le','la','li'], image: 'ðŸ—„ï¸' },
  { id: 'kasur',   display: '__-sur',     answer: 'ka',  choices: ['ka','ki','ke'], image: 'ðŸ›ï¸' },
  { id: 'bantal',  display: '__-ntal',    answer: 'ban', choices: ['ban','ben','bin'], image: 'ðŸ›ï¸' },
  { id: 'cermin',  display: '__-min',     answer: 'cer', choices: ['cer','car','cir'], image: 'ðŸªž' },
  { id: 'lampu',   display: '__-pu',      answer: 'lam', choices: ['lam','lem','lim'], image: 'ðŸ’¡' },
  { id: 'kipas',   display: '__-pas',     answer: 'ki',  choices: ['ki','ka','ke'], image: 'ðŸŒ€' },
  { id: 'radio',   display: '__-dio',     answer: 'ra',  choices: ['ra','ri','re'], image: 'ðŸ“»' },
  { id: 'kompor',  display: '__-por',     answer: 'kom', choices: ['kom','kam','kem'], image: 'ðŸ”¥' },
  { id: 'wajan',   display: '__-jan',     answer: 'wa',  choices: ['wa','wi','we'], image: 'ðŸ³' },
  { id: 'piring',  display: '__-ring',    answer: 'pi',  choices: ['pi','pa','pe'], image: 'ðŸ½ï¸' },
  { id: 'gelas',   display: '__-las',     answer: 'ge',  choices: ['ge','ga','gi'], image: 'ðŸ¥¤' },
  { id: 'sendok',  display: '__-ndok',    answer: 'sen', choices: ['sen','san','sin'], image: 'ðŸ¥„' },
  { id: 'garpu',   display: '__-rpu',     answer: 'gar', choices: ['gar','ger','gir'], image: 'ðŸ´' },
  { id: 'pisau',   display: '__-sau',     answer: 'pi',  choices: ['pi','pa','pe'], image: 'ðŸ”ª' },
  { id: 'ember',   display: '__-ber',     answer: 'em',  choices: ['em','am','im'], image: 'ðŸª£' },
  { id: 'kain',    display: '__-in',      answer: 'ka',  choices: ['ka','ki','ke'], image: 'ðŸ§º' },
  { id: 'sabun',   display: '__-bun',     answer: 'sa',  choices: ['sa','si','se'], image: 'ðŸ§¼' },
  { id: 'sikat',   display: '__-kat',     answer: 'si',  choices: ['si','sa','se'], image: 'ðŸª¥' },
  { id: 'sampo',   display: '__-po',      answer: 'sam', choices: ['sam','sem','sim'], image: 'ðŸ§´' },
  { id: 'handuk',  display: '__-duk',     answer: 'han', choices: ['han','hen','hin'], image: 'ðŸ›' },
  { id: 'tisu',    display: '__-su',      answer: 'ti',  choices: ['ti','ta','te'], image: 'ðŸ§»' },
  { id: 'roti',    display: '__-ti',      answer: 'ro',  choices: ['ro','ra','ri'], image: 'ðŸž' },
  { id: 'kue',     display: '__-e',       answer: 'ku',  choices: ['ku','ke','ki'], image: 'ðŸ°' },
  { id: 'buah',    display: '__-ah',      answer: 'bu',  choices: ['bu','ba','bi'], image: 'ðŸŽ' },
  { id: 'kupu',    display: '__-pu',      answer: 'ku',  choices: ['ku','ka','ki'], image: 'ðŸ¦‹' },
  { id: 'bunga',   display: '__-nga',     answer: 'bu',  choices: ['bu','ba','bi'], image: 'ðŸŒ¸' },
  { id: 'burung',  display: '__-rung',    answer: 'bu',  choices: ['bu','ba','bi'], image: 'ðŸ¦' },
  { id: 'cangkir', display: '__-kir',     answer: 'cang',choices: ['cang','cing','ceng'], image: 'â˜•' },
  { id: 'mainan',  display: '__-nan',     answer: 'mai', choices: ['mai','mi','me'], image: 'ðŸ§¸' },
  { id: 'piano',   display: '__-a-no',    answer: 'pi',  choices: ['pi','pa','pe'], image: 'ðŸŽ¹' },
  { id: 'jalan',   display: '__-lan',     answer: 'ja',  choices: ['ja','ji','je'], image: 'ðŸ›¤ï¸' },
  { id: 'laut',    display: '__-ut',      answer: 'la',  choices: ['la','li','le'], image: 'ðŸŒŠ' },
  { id: 'kepala',  display: '__-pa-la',   answer: 'ke',  choices: ['ke','ka','ki'], image: 'ðŸ™‚' },
  { id: 'pintu',   display: '__-tu',      answer: 'pin', choices: ['pin','pan','pen'], image: 'ðŸšª' },
  { id: 'rambut',  display: '__-but',     answer: 'ram', choices: ['ram','rem','rim'], image: 'ðŸ’‡' },
  { id: 'tangga',  display: '__-ga',      answer: 'tang',choices: ['tang','ting','teng'], image: 'ðŸªœ' },
  { id: 'angin',   display: '__-ngin',    answer: 'a',   choices: ['a','i','e'],   image: 'ðŸ’¨' },
  { id: 'kertas',  display: '__-tas',     answer: 'ker', choices: ['ker','kar','kir'], image: 'ðŸ“„' },
  { id: 'zaitun',  display: '__-tun',     answer: 'zai', choices: ['zai','ze','zi'], image: 'ðŸ«’' }
];



const generateLengkapiSukuKataBelakangQuestions = (): Question[] => {
  return lengkapiSukuKataBelakangData.map(item => ({
    id: item.id + '_belakang',
    type: 'lengkapi_suku_kata_belakang' as const,
    prompt: 'Lengkapi bagian depan kata dengan suku kata yang tepat',
    display: item.display,
    ttsText: item.id,
    answer: item.answer,
    choices: shuffleArray(item.choices),
    image: item.image,
    word: item.id,
    level: 'mudah',
    tags: ['lengkapi_suku_kata_belakang']
  }));
};

// Lengkapi Suku Kata questions (150 questions) - from document
const lengkapiSukaKataData = [
  {
    "image": "ðŸž"
  },
  {
    "id": "pelaut",
    "display": "pe-la-__",
    "answer": "ut",
    "choices": [
      "um",
      "un",
      "ut"
    ],
    "image": "ðŸŒŠ"
  },
  {
    "id": "komputer",
    "display": "kom-pu-__",
    "answer": "ter",
    "choices": [
      "ter",
      "tem",
      "ten"
    ],
    "image": "ðŸ–¥ï¸"
  },
  {
    "id": "perahu",
    "display": "pe-ra-__",
    "answer": "hu",
    "choices": [
      "he",
      "hu",
      "ha"
    ],
    "image": "ðŸ›¶"
  },
  {
    "id": "gelas",
    "display": "ge-__",
    "answer": "las",
    "choices": [
      "lam",
      "las",
      "lan"
    ],
    "image": "ðŸ¥¤"
  },
  {
    "id": "berjalan",
    "display": "ber-ja-__",
    "answer": "lan",
    "choices": [
      "lat",
      "lam",
      "lan"
    ],
    "image": "ðŸš¶"
  },
  {
    "id": "alpukat",
    "display": "al-pu-__",
    "answer": "kat",
    "choices": [
      "kan",
      "kam",
      "kat"
    ],
    "image": "ðŸ¥‘"
  },
  {
    "id": "angin",
    "display": "ang-__",
    "answer": "in",
    "choices": [
      "im",
      "in",
      "it"
    ],
    "image": "ðŸ’¨"
  },
  {
    "id": "bantal",
    "display": "ban-__",
    "answer": "tal",
    "choices": [
      "tan",
      "tal",
      "tam"
    ],
    "image": "ðŸ›ï¸"
  },
  {
    "id": "kompor",
    "display": "kom-__",
    "answer": "por",
    "choices": [
      "pom",
      "pon",
      "por"
    ],
    "image": "ðŸ”¥"
  },
  {
    "id": "sampo",
    "display": "sam-__",
    "answer": "po",
    "choices": [
      "pa",
      "po",
      "pu"
    ],
    "image": "ðŸ§´"
  },
  {
    "id": "kakek",
    "display": "ka-__",
    "answer": "kek",
    "choices": [
      "kem",
      "ken",
      "kek"
    ],
    "image": "ðŸ‘´"
  },
  {
    "id": "merpati",
    "display": "mer-pa-__",
    "answer": "ti",
    "choices": [
      "to",
      "ti",
      "tu"
    ],
    "image": "ðŸ•Šï¸"
  },
  {
    "id": "kasur",
    "display": "ka-__",
    "answer": "sur",
    "choices": [
      "sur",
      "sum",
      "sun"
    ],
    "image": "ðŸ›ï¸"
  },
  {
    "id": "penggaris",
    "display": "peng-ga-__",
    "answer": "ris",
    "choices": [
      "rim",
      "rin",
      "ris"
    ],
    "image": "ðŸ“"
  },
  {
    "image": "ðŸƒ"
  },
  {
    "id": "bolu",
    "display": "bo-__",
    "answer": "lu",
    "choices": [
      "lo",
      "lu",
      "le"
    ],
    "image": "ðŸ°"
  },
  {
    "id": "saringan",
    "display": "sa-ring-__",
    "answer": "an",
    "choices": [
      "am",
      "at",
      "an"
    ],
    "image": "ðŸ§º"
  },
  {
    "image": "ðŸ"
  },
  {
    "id": "pensil",
    "display": "pen-__",
    "answer": "sil",
    "choices": [
      "sil",
      "sin",
      "sim"
    ],
    "image": "âœï¸"
  },
  {
    "id": "printer",
    "display": "prin-__",
    "answer": "ter",
    "choices": [
      "tem",
      "ten",
      "ter"
    ],
    "image": "ðŸ–¨ï¸"
  },
  {
    "id": "kepala",
    "display": "ke-pa-__",
    "answer": "la",
    "choices": [
      "le",
      "li",
      "la"
    ],
    "image": "âœ¨"
  },
  {
    "id": "ember",
    "display": "em-__",
    "answer": "ber",
    "choices": [
      "bem",
      "ben",
      "ber"
    ],
    "image": "ðŸª£"
  },
  {
    "id": "dokter",
    "display": "dok-__",
    "answer": "ter",
    "choices": [
      "ten",
      "tem",
      "ter"
    ],
    "image": "ðŸ§‘â€âš•ï¸"
  },
  {
    "id": "kamar",
    "display": "ka-__",
    "answer": "mar",
    "choices": [
      "mam",
      "mar",
      "man"
    ],
    "image": "ðŸ "
  },
  {
    "id": "dompet",
    "display": "dom-__",
    "answer": "pet",
    "choices": [
      "pet",
      "pen",
      "pem"
    ],
    "image": "ðŸ‘›"
  },
  {
    "id": "rumah",
    "display": "ru-__",
    "answer": "mah",
    "choices": [
      "man",
      "mah",
      "mam"
    ],
    "image": "ðŸ "
  },
  {
    "id": "sepakbola",
    "display": "se-pak-bo-__",
    "answer": "la",
    "choices": [
      "le",
      "li",
      "la"
    ],
    "image": "âš½"
  },
  {
    "id": "sabun",
    "display": "sa-__",
    "answer": "bun",
    "choices": [
      "but",
      "bun",
      "bum"
    ],
    "image": "ðŸ§¼"
  },
  {
    "id": "meja",
    "display": "me-__",
    "answer": "ja",
    "choices": [
      "je",
      "ji",
      "ja"
    ],
    "image": "ðŸª‘"
  },
  {
    "id": "gula",
    "display": "gu-__",
    "answer": "la",
    "choices": [
      "le",
      "li",
      "la"
    ],
    "image": "ðŸ¯"
  },
  {
    "id": "lucu",
    "display": "lu-__",
    "answer": "cu",
    "choices": [
      "ce",
      "ca",
      "cu"
    ],
    "image": "âœ¨"
  },
  {
    "id": "perawat",
    "display": "pe-ra-__",
    "answer": "wat",
    "choices": [
      "wat",
      "wan",
      "wam"
    ],
    "image": "ðŸ§‘â€âš•ï¸"
  },
  {
    "id": "piring",
    "display": "pi-__",
    "answer": "ring",
    "choices": [
      "rinn",
      "rinm",
      "ring"
    ],
    "image": "ðŸ½ï¸"
  },
  {
    "id": "susu",
    "display": "su-__",
    "answer": "su",
    "choices": [
      "sa",
      "su",
      "se"
    ],
    "image": "ðŸ¥›"
  },
  {
    "id": "rubah",
    "display": "ru-__",
    "answer": "bah",
    "choices": [
      "bah",
      "bam",
      "ban"
    ],
    "image": "ðŸ¦Š"
  },
  {
    "id": "sikat",
    "display": "si-__",
    "answer": "kat",
    "choices": [
      "kat",
      "kan",
      "kam"
    ],
    "image": "ðŸª¥"
  },
  {
    "id": "boneka",
    "display": "bo-ne-__",
    "answer": "ka",
    "choices": [
      "ki",
      "ke",
      "ka"
    ],
    "image": "âœ¨"
  },
  {
    "id": "pisang",
    "display": "pi-__",
    "answer": "sang",
    "choices": [
      "sang",
      "sanm",
      "sann"
    ],
    "image": "ðŸŒ"
  },
  {
    "id": "wanita",
    "display": "wa-ni-__",
    "answer": "ta",
    "choices": [
      "te",
      "ta",
      "tu"
    ],
    "image": "ðŸ‘©"
  },
  {
    "id": "burung",
    "display": "bu-__",
    "answer": "rung",
    "choices": [
      "runn",
      "rung",
      "runm"
    ],
    "image": "ðŸ¦"
  },
  {
    "id": "piano",
    "display": "pi-a-__",
    "answer": "no",
    "choices": [
      "na",
      "no",
      "nu"
    ],
    "image": "âœ¨"
  },
  {
    "id": "kertas",
    "display": "ker-__",
    "answer": "tas",
    "choices": [
      "tas",
      "tam",
      "tan"
    ],
    "image": "ðŸ“„"
  },
  {
    "id": "jari",
    "display": "ja-__",
    "answer": "ri",
    "choices": [
      "ri",
      "ru",
      "ro"
    ],
    "image": "â˜ï¸"
  },
  {
    "id": "nada",
    "display": "na-__",
    "answer": "da",
    "choices": [
      "di",
      "de",
      "da"
    ],
    "image": "âœ¨"
  },
  {
    "id": "kamera",
    "display": "ka-me-__",
    "answer": "ra",
    "choices": [
      "re",
      "ra",
      "ri"
    ],
    "image": "ðŸ“·"
  },
  {
    "id": "tuna",
    "display": "tu-__",
    "answer": "na",
    "choices": [
      "na",
      "an",
      "ni"
    ],
    "image": "ðŸŸ"
  },
  {
    "image": "ðŸ‘µ"
  },
  {
    "image": "ðŸ¦‘"
  },
  {
    "id": "tahu",
    "display": "ta-__",
    "answer": "hu",
    "choices": [
      "hu",
      "ha",
      "he"
    ],
    "image": "ðŸ§ˆ"
  },
  {
    "id": "kuku",
    "display": "ku-__",
    "answer": "ku",
    "choices": [
      "ke",
      "ku",
      "ka"
    ],
    "image": "âœ¨"
  },
  {
    "id": "nasi",
    "display": "na-__",
    "answer": "si",
    "choices": [
      "so",
      "su",
      "si"
    ],
    "image": "âœ¨"
  },
  {
    "id": "harimau",
    "display": "ha-ri-__",
    "answer": "mau",
    "choices": [
      "mae",
      "maa",
      "mau"
    ],
    "image": "ðŸ¯"
  },
  {
    "id": "pulpen",
    "display": "pul-__",
    "answer": "pen",
    "choices": [
      "pem",
      "pet",
      "pen"
    ],
    "image": "ðŸ–Šï¸"
  },
  {
    "id": "lampu",
    "display": "lam-__",
    "answer": "pu",
    "choices": [
      "pu",
      "pe",
      "pa"
    ],
    "image": "ðŸ’¡"
  },
  {
    "id": "mainan",
    "display": "mai-__",
    "answer": "nan",
    "choices": [
      "nam",
      "nan",
      "nat"
    ],
    "image": "âœ¨"
  },
  {
    "id": "kipas",
    "display": "ki-__",
    "answer": "pas",
    "choices": [
      "pan",
      "pam",
      "pas"
    ],
    "image": "ðŸŒ€"
  },
  {
    "id": "bulan",
    "display": "bu-__",
    "answer": "lan",
    "choices": [
      "lan",
      "lat",
      "lam"
    ],
    "image": "ðŸŒ™"
  },
  {
    "id": "mewarnai",
    "display": "me-war-__",
    "answer": "nai",
    "choices": [
      "nau",
      "nao",
      "nai"
    ],
    "image": "ðŸ–ï¸"
  },
  {
    "image": "ðŸ¦‹"
  },
  {
    "image": "âœˆï¸"
  },
  {
    "id": "badak",
    "display": "ba-__",
    "answer": "dak",
    "choices": [
      "dak",
      "dam",
      "dan"
    ],
    "image": "ðŸ¦"
  },
  {
    "image": "ðŸ€"
  },
  {
    "id": "guru",
    "display": "gu-__",
    "answer": "ru",
    "choices": [
      "ru",
      "re",
      "ra"
    ],
    "image": "ðŸ‘©â€ðŸ«"
  },
  {
    "image": "ðŸžï¸"
  },
  {
    "image": "ðŸ”"
  },
  {
    "image": "â­"
  },
  {
    "image": "ðŸžï¸"
  },
  {
    "image": "ðŸš†"
  },
  {
    "image": "ðŸŒ…"
  },
  {
    "image": "ðŸ²"
  },
  {
    "image": "ðŸ«’"
  },
  {
    "id": "badminton",
    "display": "bad-min-__",
    "answer": "ton",
    "choices": [
      "tot",
      "ton",
      "tom"
    ],
    "image": "ðŸ¸"
  },
  {
    "image": "ï¿½ï¿½"
  },
  {
    "id": "kunci",
    "display": "kun-__",
    "answer": "ci",
    "choices": [
      "ci",
      "co",
      "cu"
    ],
    "image": "ðŸ”‘"
  },
  {
    "id": "pantai",
    "display": "pan-__",
    "answer": "tai",
    "choices": [
      "tai",
      "tau",
      "tao"
    ],
    "image": "ðŸ–ï¸"
  },
  {
    "id": "anggur",
    "display": "ang-__",
    "answer": "gur",
    "choices": [
      "gun",
      "gum",
      "gur"
    ],
    "image": "ðŸ‡"
  },
  {
    "id": "sapi",
    "display": "sa-__",
    "answer": "pi",
    "choices": [
      "po",
      "pi",
      "pu"
    ],
    "image": "ðŸ„"
  }
];


const generateLengkapiSukaKataQuestions = (): Question[] => {
  return lengkapiSukaKataData.map(item => ({
    id: item.id,
    type: 'lengkapi_suku_kata' as const,
    prompt: 'Lengkapi kata dengan suku kata yang tepat',
    display: item.display,
    ttsText: item.id,
    answer: item.answer,
    choices: shuffleArray(item.choices),
    image: item.image,
    word: item.id,
    level: 'mudah',
    tags: ['lengkapi_suku_kata']
  }));
};

export const generateQuizQuestions = (
  quizType: string,
  count: number,
  seenIds: Set<string>
): Question[] => {
  let allQuestions: Question[] = [];
  
  switch (quizType) {
    case 'suku_kata':
      allQuestions = generateSukaKataQuestions();
      break;
    case 'awal_kata':
      allQuestions = generateAwalKataQuestions();
      break;
    case 'akhir_kata':
      allQuestions = generateAkhirKataQuestions();
      break;
    case 'tengah_kata':
      allQuestions = generateTengahKataQuestions();
      break;
    case 'lengkapi_suku_kata':
      allQuestions = generateLengkapiSukaKataQuestions();
      break;
    case 'lengkapi_suku_kata_belakang':
      allQuestions = generateLengkapiSukuKataBelakangQuestions();
      break;
  }
  
  // Filter out seen questions if remember setting is enabled
  const availableQuestions = allQuestions.filter(q => !seenIds.has(q.id));
  
  // If not enough unseen questions, use all questions
  const questionsToUse = availableQuestions.length >= count 
    ? availableQuestions 
    : allQuestions;
  
  // Shuffle and select requested count
  const shuffled = shuffleArray(questionsToUse);
  return shuffled.slice(0, count);
};
